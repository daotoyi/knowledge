---
title: "交换机"
lastmod: "2023-09-24 18:43:04"
categories: ["电气"]
draft: true
---

## 通识 {#通识}

交换机通识

****（Unicast）&amp;（Multicast）&amp;（Broadcast）****
“广播单播”（Unicast）、
“多播”（Multicast）
“广播”（Broadcast）

至于区别, 从 MAC 地址上来分, MAC 地址是 6 个字节的,
如果全是 1 就是广播,
如果第一个字节是 01 就是组播啦,
其它的就是单播

-   存储转发 storage-forward
    当整个帧已完全接收，再进行冗余码校验、过滤和转发处理的一种转发方式。

-   吞吐量 throughput
    设备在不丢帧情况下所能达到的最大传输速率，设备所有端口同时转发数据速率能力的总和。

-   存储转发时延 latency
    从输入帧的最后一个比特到达输入端口开始，至在输出端口上检测到输出帧的第一个比特为止的时间间隔。

-   背靠背帧 back to back frame
    设备在最小帧间隔情况下，一次能够转发的最多的长度固定的数据帧数。

-   虚拟局域网 virtual local area network
    一种通过将局域网内的设备逻辑地划分成多个网段（子集）从而实现虚拟工作组的技术。

-   逻辑节点 logical node
    代表典型变电站功能的实体。

-   主动信息上送 trap
    SNMP 规定的一种通信方式，用于被管理的设备主动向充当管理者的设备报告异常信息。

-   队头阻塞
    检测交换机，从输入端口试图向某一拥塞端口发送数据帧情况下，不堵塞端口的帧丢失率或时延情况；


## 二层交换机 {#二层交换机}

二层交换机可以识别数据包中的 MAC 地址，根据 MAC 地址进行转发，并将这些 MAC 地址与对应的端口记录在自己内部的一个地址表中。二层交换机不遵循路由算法。 三层交换机转发基于目标 IP 地址，数据包的目的地是定义的下一跳，三层交换机遵循路由算法。

二层交换机不遵循路由算法。通过遵循 ARP(地址解析协议)来实现。

{{< figure src="https://raw.githubusercontent.com/daotoyi/picsbed/main/img/202309241832471.png" >}}


### 特点 {#特点}

二层交换机可以充当网桥，将计算机网络系统的各种终端设备连接在一个平台上。它们能够非常快速且有效地将数据从 LAN 网络的源端传输到目标端。

二层交换机通过从交换机的地址表中学习目的节点的 MAC 地址，执行交换功能，将数据帧从源端重新排列到目的端。

MAC 地址表为二层设备提供了唯一的地址，用于标识数据下发的终端设备和节点。

二层交换机将庞大复杂的 LAN 网络拆分为一个个小的 VLAN 网络。

通过在一个大型的 LAN 网络中配置多个 VLAN，在没有物理连接的情况下，交换变得更快。


### 应用 {#应用}

通过二层交换机，我们可以轻松地将位于同一 VLAN 内的数据帧从源端发送到目的端，而无需物理连接或位于同一位置。

因此，软件公司的服务器可以集中放置在一个位置，而分散在其他位置的客户端可以轻松访问数据而没有延迟，从而节省服务器成本和时间。

组织可以通过使用这些类型的交换机将主机配置在同一个 VLAN 中，而不需要任何互联网连接，从而实现内部通信。


## 三层交换机 {#三层交换机}

当我们需要在不同的 LAN 或 VLAN 之间传输数据时，二层交换机就无法满足了。这时需要三层交换机，因为它们将数据包路由到目的地的技术是 IP 地址和子网划分。

三层交换机工作在 OSI 参考模型的第 3 层，并使用 IP 地址执行数据包的路由。它们比二层交换机具有更快的切换速度，甚至比传统路由器更快，因为它们不使用额外的跃点来执行数据包的路由，从而会带来更好的性能。

{{< figure src="https://raw.githubusercontent.com/daotoyi/picsbed/main/img/202309241835375.png" >}}

第 3 层中的源端设备首先查看自己的路由表，路由表中包含了源 IP 地址、目的 IP 地址和子网掩码的所有信息。然后，根据它从路由表中收集的信息，将数据包发送到目的地，并可以在不同的 LAN、MAN 和 WAN 网络之间进一步传递数据。它遵循最短且安全的路径在终端设备之间传递数据。这就是路由的总体概念。


### 特点 {#特点}

执行静态路由，以在不同 VLAN 之间传输数据。而二层设备只能在同一 VLAN 网络之间传输数据。

以与路由器相同的方式执行动态路由，这种动态路由技术允许交换机执行最佳数据包路由。

根据网络的实时场景提供一组多路径来传递数据包。交换机可以选择最可行的路径来路由数据包，目前流行的路由技术包括 RIP 和 OSPF。

有能力识别关于流量流向的交换机的相关 IP 地址信息。

能够根据子网划分或 VLAN 流量标记部署 QoS 分类，而不是像二层交换机那样手动配置交换机端口。

需要更多的功率来运行，并在交换机之间提供更高带宽的链路，这些链路几乎超过 10Gbits。

为数据交换提供高度安全的路径。


### 应用 {#应用}

被广泛用于数据中心等大型园区。三层交换机具有静态路由和动态路由等特点，且交换速度比路由器快，因此它被用于局域网连接中，用于多个 VLAN 和 LAN 网络的互连。

三层交换机与多台二层交换机相结合，可以支持更多用户接入网络，无需额外部署三层交换机和更多带宽。如果一个网络平台上的终端用户数量增加，那么无需对网络进行任何增强，就可以轻松地将其容纳在同一个运行场景中。

三层交换机可以轻松处理高带宽资源和最终用户应用，它提供了 10Gbits 带宽。

三层交换机有能力解除过载的路由器的负担。在广域网场景中，每个三层交换机都有一个主路由器，这样交换机就可以管理所有的本地 VLAN 路由。

通过遵循上述类型的场景，路由器的工作效率将会提高，并且可以专门用于长距离（WAN）连接和数据传输。

三层交换机十分智能，可以利用其高带宽处理和管理本地连接的服务器和终端设备的路由和流量控制。因此，公司通常使用三层交换机来连接其监控服务器和子系统 NOC 中心的主机节点。


## 二层与三层的区别 {#二层与三层的区别}


### 工作方式 {#工作方式}

二层交换机工作在数据链路层，三层交换机工作在网络层，三层交换机不仅实现了数据包的高速转发，还可以根据不同网络状况达到最优网络性能。


### 原理不同 {#原理不同}

二层交换机的原理是当交换机从某个端口收到一个数据包，它会先读取包中的源 MAC 地址，再去读取包中的目的 MAC 地址，并在地址表中查找对应的端口，如表中有和目的 MAC 地址对应的端口，就把数据包直接复制到这个端口上。三层交换机的原理比较简单，就是一次路由多次交换，通俗来说就是第一次进行源到目的的路由，三层交换机会将此数据转到二层，那么下次无论是目的到源还是源到目的都可以进行快速交换。


### 功能不同 {#功能不同}

二层交换机基于 MAC 地址访问，只做数据的转发，并且不能配置 IP 地址，而三层交换机将二层交换技术和三层转发功能结合在一起，也就是说三层交换机在二层交换机的基础上增加了路由功能，可配置不同 VLAN 的 IP 地址，可通过三层路由实现不同 VLAN 之间通讯。


### 应用不同 {#应用不同}

二层交换机主要用于网络接入层和汇聚层，而三层交换机主要用于网络核心层，但是也存在少部分三层交换机用于汇聚层的现象，下图是三层交换机的实际应用实例。


### 支持的协议不同 {#支持的协议不同}

二层交换机支持物理层和数据链路层协议，而三层交换机支持物理层、数据链路层及网络层协议。


## 参考 {#参考}

-   [WX：7 张图带你搞懂二层和三层交换机之间的区别](https://mp.weixin.qq.com/s/dMMGg-ydmvDLWF0l6Y2XwA)